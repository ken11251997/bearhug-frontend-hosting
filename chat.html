<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.4/socket.io.js" defer></script>
    <link rel="stylesheet" href="static/css/sanitize.css">
    <link rel="stylesheet" href="static/css/chat.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/sanitize.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chat.css') }}">
    <style>
        body::before {
          content: "";
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          background-image: url("static/img/paw.png");
          background-repeat: repeat;
          background-size: 80px 80px;
          opacity: 0.05;
          transform: rotate(-30deg);
          z-index: 0;
          pointer-events: none;
        }
      </style>
</head>
<body>
    <div class="container">
        <div id="loading-overlay" class="hidden" style="display: none;">
            <div class="loading-box">
              <div class="spinner"></div>
              <img src="static/img/bear_2.png" alt="ローディングくま" class="bear-loader">
              <p class="loading-text">ロード中...</p>
            </div>
        </div>
        <div class="chat-header">
            <button id="back-btn" class="btn">◀</button>
            <div id="chat-info">
                <span id="chat-title" class="chat-name">a</span>
                <span id="chat-mbti" class="chat-mbti mbti-yellow">(ISFJ - 擁護者)</span>
            </div>
            <button id="leave-btn" class="btn">マッチ解除</button>
        </div>
        
        <div id="chat-container">
            <div id="chat-box">
            </div>
        </div>
        
        <div id="input-container">
            <!-- <label for="file-input"> -->
                <img src="static/img//camera_icon.png" id="media-btn" class="icon-button" alt="カメラ">
            <!-- </label> -->
            <input type="file" id="file-input" class="hidden" accept="image/*,video/*">
            <button id="send-file-btn">▶</button>

            <div class="input-wrapper">
                <input type="text" id="message-input" placeholder="メッセージを入力">
                <label id="send-btn" type="button">
                    <img src="static/img/send_message.png" class="icon-button" alt="送信">
                </label>
            </div>
        </div>
    </div>
    
    <script src="static/js/chat.js" defer></script>
    <script src="{{ url_for('static', filename='js/chat.js') }}" defer></script>

    <!-- <iframe id="bgm-iframe" src="static/sound/bgm.html" style="display:none;"></iframe> -->
    <!-- <script>
    const bgmFrame = document.getElementById("bgm-iframe");
    document.addEventListener("click", () => {
        bgmFrame.contentWindow.postMessage({ command: "play" }, "*");
    }, { once: true });
    </script> -->
</body>
</html>
